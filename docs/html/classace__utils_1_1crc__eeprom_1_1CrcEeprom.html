<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AceUtils: ace_utils::crc_eeprom::CrcEeprom Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">AceUtils
   &#160;<span id="projectnumber">0.4</span>
   </div>
   <div id="projectbrief">Useful Arduino utilties which are too small as separate libraries, but complex enough to be shared among multiple projects, and often have external dependencies to other libraries.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ace_utils</b></li><li class="navelem"><b>crc_eeprom</b></li><li class="navelem"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html">CrcEeprom</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ace_utils::crc_eeprom::CrcEeprom Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Thin wrapper around the EEPROM object (from the the built-in EEPROM library) to read and write a given block of data along with its CRC check.  
 <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a94b1fd4a63022713b355d45bc68de767"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a94b1fd4a63022713b355d45bc68de767">Crc32Calculator</a>) (const void *data, size_t dataSize)</td></tr>
<tr class="memdesc:a94b1fd4a63022713b355d45bc68de767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function pointer to the CRC32 calculator.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a94b1fd4a63022713b355d45bc68de767">More...</a><br /></td></tr>
<tr class="separator:a94b1fd4a63022713b355d45bc68de767"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad6f0e26adae30c2397313dc1547d0cfb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#ad6f0e26adae30c2397313dc1547d0cfb">CrcEeprom</a> (<a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a94b1fd4a63022713b355d45bc68de767">Crc32Calculator</a> crcCalc=ace_crc::crc32_nibble::crc_calculate)</td></tr>
<tr class="memdesc:ad6f0e26adae30c2397313dc1547d0cfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor with an optional Crc32Calculator parameter.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#ad6f0e26adae30c2397313dc1547d0cfb">More...</a><br /></td></tr>
<tr class="separator:ad6f0e26adae30c2397313dc1547d0cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa98dd019e95fad991a77296eec0e728"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#afa98dd019e95fad991a77296eec0e728">begin</a> (size_t size)</td></tr>
<tr class="memdesc:afa98dd019e95fad991a77296eec0e728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call from global setup() function.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#afa98dd019e95fad991a77296eec0e728">More...</a><br /></td></tr>
<tr class="separator:afa98dd019e95fad991a77296eec0e728"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb4a02090c1bfc668cf86cbb12e713c0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#adb4a02090c1bfc668cf86cbb12e713c0">writeWithCrc</a> (int address, const void *const data, const size_t dataSize) const</td></tr>
<tr class="memdesc:adb4a02090c1bfc668cf86cbb12e713c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the data with its CRC.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#adb4a02090c1bfc668cf86cbb12e713c0">More...</a><br /></td></tr>
<tr class="separator:adb4a02090c1bfc668cf86cbb12e713c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82c85ef76e886c832438a71d5d4e7e9b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a82c85ef76e886c832438a71d5d4e7e9b">readWithCrc</a> (int address, void *const data, const size_t dataSize) const</td></tr>
<tr class="memdesc:a82c85ef76e886c832438a71d5d4e7e9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the data from EEPROM along with its CRC.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a82c85ef76e886c832438a71d5d4e7e9b">More...</a><br /></td></tr>
<tr class="separator:a82c85ef76e886c832438a71d5d4e7e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a2f2fcf3066d500a77cfbbf1e03437a8e"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a2f2fcf3066d500a77cfbbf1e03437a8e">kCrcSize</a> = sizeof(uint32_t)</td></tr>
<tr class="memdesc:a2f2fcf3066d500a77cfbbf1e03437a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the crc32 type, uint32_t.  <a href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a2f2fcf3066d500a77cfbbf1e03437a8e">More...</a><br /></td></tr>
<tr class="separator:a2f2fcf3066d500a77cfbbf1e03437a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Thin wrapper around the EEPROM object (from the the built-in EEPROM library) to read and write a given block of data along with its CRC check. </p>
<p>The CRC is written <em>after</em> the data block, instead of at the beginning of the data block to reduce flash write wear of the bytes corresonding to the CRC. Over time, it is expected that the size of the data block will change, as fields are added or deleted. Therefore, the location of the CRC bytes will also change, which helps wear leveling. If the CRC bytes were at the beginning, those CRC byes would experience the highest level of writes, even when the data block size changes. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00039">39</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a94b1fd4a63022713b355d45bc68de767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94b1fd4a63022713b355d45bc68de767">&#9670;&nbsp;</a></span>Crc32Calculator</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t(* ace_utils::crc_eeprom::CrcEeprom::Crc32Calculator) (const void *data, size_t dataSize)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function pointer to the CRC32 calculator. </p>
<p>For example, <code>ace_crc::crc32_nibble::crc_calculate</code> or <code>ace_crc::crc32_byte::crc_calculate</code>. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00046">46</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad6f0e26adae30c2397313dc1547d0cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f0e26adae30c2397313dc1547d0cfb">&#9670;&nbsp;</a></span>CrcEeprom()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ace_utils::crc_eeprom::CrcEeprom::CrcEeprom </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classace__utils_1_1crc__eeprom_1_1CrcEeprom.html#a94b1fd4a63022713b355d45bc68de767">Crc32Calculator</a>&#160;</td>
          <td class="paramname"><em>crcCalc</em> = <code>ace_crc::crc32_nibble::crc_calculate</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor with an optional Crc32Calculator parameter. </p>
<p>By default, the Crc32Calculator will be set to <code>ace_crc::crc32_nibble::crc_calculate()</code> which uses a 4-bit (16 element) lookup table and has a good balance between flash memory consumption and speed. You can choose to provide an alternate CRC32 calculator for faster speed or for smaller flash memory consumption. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00059">59</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afa98dd019e95fad991a77296eec0e728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa98dd019e95fad991a77296eec0e728">&#9670;&nbsp;</a></span>begin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ace_utils::crc_eeprom::CrcEeprom::begin </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Call from global setup() function. </p>
<p>Needed for ESP8266 and ESP32, does nothing for AVR and others. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00069">69</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<a id="a82c85ef76e886c832438a71d5d4e7e9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82c85ef76e886c832438a71d5d4e7e9b">&#9670;&nbsp;</a></span>readWithCrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool ace_utils::crc_eeprom::CrcEeprom::readWithCrc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>dataSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read the data from EEPROM along with its CRC. </p>
<p>Return true if the CRC of the data retrieved matches the CRC of the data when it was written. The type of <code>address</code> is <code>int</code> for consistency with the API of the EEPROM library. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00108">108</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<a id="adb4a02090c1bfc668cf86cbb12e713c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb4a02090c1bfc668cf86cbb12e713c0">&#9670;&nbsp;</a></span>writeWithCrc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t ace_utils::crc_eeprom::CrcEeprom::writeWithCrc </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *const&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>dataSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write the data with its CRC. </p>
<p>Returns the number of bytes written. The type of <code>address</code> is <code>int</code> for consistency with the API of the EEPROM library. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00082">82</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a2f2fcf3066d500a77cfbbf1e03437a8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2fcf3066d500a77cfbbf1e03437a8e">&#9670;&nbsp;</a></span>kCrcSize</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t ace_utils::crc_eeprom::CrcEeprom::kCrcSize = sizeof(uint32_t)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the crc32 type, uint32_t. </p>
<p>Should always be 4. </p>

<p class="definition">Definition at line <a class="el" href="CrcEeprom_8h_source.html#l00049">49</a> of file <a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/brian/src/AceUtils/src/crc_eeprom/<a class="el" href="CrcEeprom_8h_source.html">CrcEeprom.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
